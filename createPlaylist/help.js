// –ò—Å–ø–æ–ª—å–∑—É—è –ø–∞—Ç—Ç–µ—Ä–Ω "–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å" (Observer), –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –±–æ–ª–µ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–∞—à–∏—Ö —Ç—Ä–µ–∫–æ–≤ –∏ –∏—Ö –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç—Ä–µ–∫–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç.

// –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ "–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å"
// –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å Observer: –≠—Ç–æ—Ç –∫–ª–∞—Å—Å –±—É–¥–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º–∏ –∏ —É–≤–µ–¥–æ–º–ª—è—Ç—å –∏—Ö –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.

// –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å Track: –≠—Ç–æ—Ç –∫–ª–∞—Å—Å –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å —Ç—Ä–µ–∫–∏ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–≤–µ–¥–æ–º–ª—è—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –æ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

// –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è: –û–Ω–∏ –±—É–¥—É—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç—Ä–µ–∫–∞.

// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞
// –í–æ—Ç –ø—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç—Ç–∏—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏–π:

class Observer {
  constructor() {
    this.subscribers = [];
  }

  subscribe(subscriber) {
    this.subscribers.push(subscriber);
  }

  notify(data) {
    for (const subscriber of this.subscribers) {
      subscriber.update(data);
    }
  }
}

class Track {
  constructor(artist, title) {
    this.artist = artist;
    this.title = title;
    this.isHot = false;
    this.observer = new Observer();
  }

  toggleHot() {
    this.isHot = !this.isHot;
    this.observer.notify(this); // –£–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
  }

  addObserver(observer) {
    this.observer.subscribe(observer);
  }
}

class TrackDisplay {
  constructor(track) {
    this.track = track;
    this.track.addObserver(this);
    this.element = this.createTrackElement();
    this.render();
  }

  createTrackElement() {
    const div = document.createElement("div");
    const likeButton = document.createElement("button");
    likeButton.innerText = "‚ù§Ô∏è";
    likeButton.addEventListener("click", () => {
      this.track.toggleHot();
    });

    div.appendChild(this.trackTitle());
    div.appendChild(likeButton);
    return div;
  }

  trackTitle() {
    const title = document.createElement("span");
    title.id = `track-${this.track.artist}-${this.track.title}`;
    return title;
  }

  update() {
    this.render(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  }

  render() {
    const titleHtml = `${this.track.isHot ? "üî•" : ""} ${this.track.artist} - ${
      this.track.title
    }`;
    const titleElement = document.getElementById(
      `track-${this.track.artist}-${this.track.title}`
    );
    titleElement.innerText = titleHtml; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  }
}

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
const tracks = [
  new Track("Artist 1", "Song 1"),
  new Track("Artist 2", "Song 2"),
];

const displayElements = tracks.map((track) => new TrackDisplay(track));
const playlistContainer = document.getElementById("playlist"); // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –ø–ª–µ–π–ª–∏—Å—Ç–∞
displayElements.forEach((display) =>
  playlistContainer.appendChild(display.element)
);

// –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —ç—Ç–æ–º –∫–æ–¥–µ:
// Observer: –ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º–∏. –£ –Ω–µ–≥–æ –µ—Å—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏—Ö.

// Track: –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π —Ç—Ä–µ–∫. –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è isHot –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –æ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.

// TrackDisplay: –≠—Ç–æ—Ç –∫–ª–∞—Å—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞. –û–Ω –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–µ–∫–∞ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–≤–æ—é –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–µ–∫–∞.

// –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "‚ù§Ô∏è", –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ toggleHot, –∏–∑–º–µ–Ω—è—é—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–µ–∫–∞. –ó–∞—Ç–µ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ TrackDisplay), –∫–æ—Ç–æ—Ä—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç —Å–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –∏–º–µ–Ω–∏ —Ç—Ä–µ–∫–∞.

// –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
// –û—Ç–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏: –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–¥–µ–ª–µ–Ω—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞.
// –ì–∏–±–∫–æ—Å—Ç—å: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –Ω–∞–±–ª—é–¥–∞—é—â–∏–µ –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ç—Ä–µ–∫–∞.
// –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª–æ–≥–∏–∫–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ–≥–æ –∫–æ–¥–∞ ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã.
// –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –±—ã—Ç—å –±–æ–ª–µ–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–º –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–º! üòä
